75fe216b016d18d4b2407b36e5c666f6
"use strict";
/**
 * Simplified authentication error definitions for OAuth 2.1 stateless design
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AuthConfigError = exports.SessionError = exports.TokenRefreshError = exports.OAuthFlowError = exports.InsufficientScopesError = exports.InvalidTokenError = exports.AuthenticationRequiredError = exports.MCPError = exports.ValidationError = exports.AuthError = void 0;
exports.createMcpErrorResponse = createMcpErrorResponse;
exports.isAuthError = isAuthError;
exports.extractMcpErrorDetails = extractMcpErrorDetails;
/**
 * Basic authentication error class for OAuth 2.1 stateless authentication
 */
class AuthError extends Error {
    code;
    statusCode;
    constructor(message, code, statusCode = 401) {
        super(message);
        this.code = code;
        this.statusCode = statusCode;
        this.name = 'AuthError';
    }
}
exports.AuthError = AuthError;
/**
 * Basic validation error class for input validation issues
 */
class ValidationError extends Error {
    field;
    statusCode;
    constructor(message, field, statusCode = 400) {
        super(message);
        this.field = field;
        this.statusCode = statusCode;
        this.name = 'ValidationError';
    }
}
exports.ValidationError = ValidationError;
/**
 * Base MCP error class - simplified for MVP compatibility
 */
class MCPError extends Error {
    statusCode;
    constructor(message, statusCode = 500) {
        super(message);
        this.name = 'MCPError';
        this.statusCode = statusCode;
    }
    /**
     * Convert to MCP error format (simplified)
     */
    toMcpError() {
        return {
            code: this.statusCode === 401 ? -32001 : -32000,
            message: this.message,
        };
    }
}
exports.MCPError = MCPError;
// Legacy error class aliases for backward compatibility (removed complexity)
class AuthenticationRequiredError extends AuthError {
    constructor(message) {
        super(message, 'AUTHENTICATION_REQUIRED', 401);
        this.name = 'AuthenticationRequiredError';
    }
}
exports.AuthenticationRequiredError = AuthenticationRequiredError;
class InvalidTokenError extends AuthError {
    constructor(message) {
        super(message, 'INVALID_TOKEN', 401);
        this.name = 'InvalidTokenError';
    }
}
exports.InvalidTokenError = InvalidTokenError;
class InsufficientScopesError extends AuthError {
    constructor(message) {
        super(message, 'INSUFFICIENT_SCOPES', 403);
        this.name = 'InsufficientScopesError';
    }
}
exports.InsufficientScopesError = InsufficientScopesError;
class OAuthFlowError extends AuthError {
    constructor(message) {
        super(message, 'OAUTH_FLOW_ERROR', 400);
        this.name = 'OAuthFlowError';
    }
}
exports.OAuthFlowError = OAuthFlowError;
class TokenRefreshError extends AuthError {
    constructor(message) {
        super(message, 'TOKEN_REFRESH_ERROR', 401);
        this.name = 'TokenRefreshError';
    }
}
exports.TokenRefreshError = TokenRefreshError;
class SessionError extends AuthError {
    constructor(message) {
        super(message, 'SESSION_ERROR', 401);
        this.name = 'SessionError';
    }
}
exports.SessionError = SessionError;
class AuthConfigError extends AuthError {
    constructor(message) {
        super(message, 'AUTH_CONFIG_ERROR', 500);
        this.name = 'AuthConfigError';
    }
}
exports.AuthConfigError = AuthConfigError;
/**
 * Simplified utility function to create MCP error response
 */
function createMcpErrorResponse(id, error) {
    if (error instanceof MCPError) {
        return {
            jsonrpc: '2.0',
            id,
            error: error.toMcpError(),
        };
    }
    return {
        jsonrpc: '2.0',
        id,
        error: {
            code: -32000,
            message: error.message,
        },
    };
}
/**
 * Check if error is an authentication error (simplified)
 */
function isAuthError(error) {
    return error instanceof AuthError;
}
/**
 * Extract MCP error details from any error (simplified)
 */
function extractMcpErrorDetails(error) {
    if (error instanceof MCPError) {
        return error.toMcpError();
    }
    return {
        code: -32000,
        message: error?.message ?? 'Unknown error',
    };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL3dvcmtzcGFjZS9zcmMvYXV0aC9hdXRoLWVycm9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpbXBsaWZpZWQgYXV0aGVudGljYXRpb24gZXJyb3IgZGVmaW5pdGlvbnMgZm9yIE9BdXRoIDIuMSBzdGF0ZWxlc3MgZGVzaWduXG4gKi9cblxuLyoqXG4gKiBTaW1wbGlmaWVkIGF1dGhlbnRpY2F0aW9uIGNvbnRleHQgZm9yIE9BdXRoIDIuMSBzdGF0ZWxlc3MgZGVzaWduXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aENvbnRleHQge1xuICBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gIHVzZXJJZD86IHN0cmluZztcbiAgYWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIHNjb3Blcz86IHN0cmluZ1tdO1xuICBleHBpcmVzQXQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogU2ltcGxpZmllZCBzZXNzaW9uIGludGVyZmFjZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb24ge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgYXV0aENvbnRleHQ6IEF1dGhDb250ZXh0O1xuICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgbGFzdEFjY2Vzc2VkQXQ6IG51bWJlcjtcbiAgZXhwaXJlc0F0PzogbnVtYmVyO1xufVxuXG4vKipcbiAqIEJhc2ljIGF1dGhlbnRpY2F0aW9uIGVycm9yIGNsYXNzIGZvciBPQXV0aCAyLjEgc3RhdGVsZXNzIGF1dGhlbnRpY2F0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29kZTogc3RyaW5nLFxuICAgIHB1YmxpYyByZWFkb25seSBzdGF0dXNDb2RlOiBudW1iZXIgPSA0MDFcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0F1dGhFcnJvcic7XG4gIH1cbn1cblxuLyoqXG4gKiBCYXNpYyB2YWxpZGF0aW9uIGVycm9yIGNsYXNzIGZvciBpbnB1dCB2YWxpZGF0aW9uIGlzc3Vlc1xuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcHVibGljIHJlYWRvbmx5IGZpZWxkPzogc3RyaW5nLFxuICAgIHB1YmxpYyByZWFkb25seSBzdGF0dXNDb2RlOiBudW1iZXIgPSA0MDBcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1ZhbGlkYXRpb25FcnJvcic7XG4gIH1cbn1cblxuLyoqXG4gKiBCYXNlIE1DUCBlcnJvciBjbGFzcyAtIHNpbXBsaWZpZWQgZm9yIE1WUCBjb21wYXRpYmlsaXR5XG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHN0YXR1c0NvZGU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciA9IDUwMCkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdNQ1BFcnJvcic7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRvIE1DUCBlcnJvciBmb3JtYXQgKHNpbXBsaWZpZWQpXG4gICAqL1xuICB0b01jcEVycm9yKCk6IHtcbiAgICBjb2RlOiBudW1iZXI7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogdGhpcy5zdGF0dXNDb2RlID09PSA0MDEgPyAtMzIwMDEgOiAtMzIwMDAsXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBMZWdhY3kgZXJyb3IgY2xhc3MgYWxpYXNlcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSAocmVtb3ZlZCBjb21wbGV4aXR5KVxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uUmVxdWlyZWRFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UsICdBVVRIRU5USUNBVElPTl9SRVFVSVJFRCcsIDQwMSk7XG4gICAgdGhpcy5uYW1lID0gJ0F1dGhlbnRpY2F0aW9uUmVxdWlyZWRFcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludmFsaWRUb2tlbkVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgJ0lOVkFMSURfVE9LRU4nLCA0MDEpO1xuICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkVG9rZW5FcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3VmZmljaWVudFNjb3Blc0Vycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgJ0lOU1VGRklDSUVOVF9TQ09QRVMnLCA0MDMpO1xuICAgIHRoaXMubmFtZSA9ICdJbnN1ZmZpY2llbnRTY29wZXNFcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE9BdXRoRmxvd0Vycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgJ09BVVRIX0ZMT1dfRVJST1InLCA0MDApO1xuICAgIHRoaXMubmFtZSA9ICdPQXV0aEZsb3dFcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRva2VuUmVmcmVzaEVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgJ1RPS0VOX1JFRlJFU0hfRVJST1InLCA0MDEpO1xuICAgIHRoaXMubmFtZSA9ICdUb2tlblJlZnJlc2hFcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNlc3Npb25FcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UsICdTRVNTSU9OX0VSUk9SJywgNDAxKTtcbiAgICB0aGlzLm5hbWUgPSAnU2Vzc2lvbkVycm9yJztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXV0aENvbmZpZ0Vycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgJ0FVVEhfQ09ORklHX0VSUk9SJywgNTAwKTtcbiAgICB0aGlzLm5hbWUgPSAnQXV0aENvbmZpZ0Vycm9yJztcbiAgfVxufVxuXG4vKipcbiAqIFNpbXBsaWZpZWQgdXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgTUNQIGVycm9yIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNY3BFcnJvclJlc3BvbnNlKFxuICBpZDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCxcbiAgZXJyb3I6IE1DUEVycm9yIHwgRXJyb3Jcbik6IHtcbiAganNvbnJwYzogJzIuMCc7XG4gIGlkOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsO1xuICBlcnJvcjoge1xuICAgIGNvZGU6IG51bWJlcjtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gIH07XG59IHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgTUNQRXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAganNvbnJwYzogJzIuMCcsXG4gICAgICBpZCxcbiAgICAgIGVycm9yOiBlcnJvci50b01jcEVycm9yKCksXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAganNvbnJwYzogJzIuMCcsXG4gICAgaWQsXG4gICAgZXJyb3I6IHtcbiAgICAgIGNvZGU6IC0zMjAwMCxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBlcnJvciBpcyBhbiBhdXRoZW50aWNhdGlvbiBlcnJvciAoc2ltcGxpZmllZClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aEVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgQXV0aEVycm9yIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgTUNQIGVycm9yIGRldGFpbHMgZnJvbSBhbnkgZXJyb3IgKHNpbXBsaWZpZWQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0TWNwRXJyb3JEZXRhaWxzKGVycm9yOiB1bmtub3duKToge1xuICBjb2RlOiBudW1iZXI7XG4gIG1lc3NhZ2U6IHN0cmluZztcbn0ge1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNQ1BFcnJvcikge1xuICAgIHJldHVybiBlcnJvci50b01jcEVycm9yKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvZGU6IC0zMjAwMCxcbiAgICBtZXNzYWdlOiAoZXJyb3IgYXMgRXJyb3IpPy5tZXNzYWdlID8/ICdVbmtub3duIGVycm9yJyxcbiAgfTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==