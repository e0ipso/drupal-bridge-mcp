{"file":"/workspace/tests/integration/performance-baseline.test.ts","mappings":"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","names":[],"sources":["/workspace/tests/integration/performance-baseline.test.ts"],"sourcesContent":["/**\n * Performance baseline tests for the JSON-RPC Drupal integration\n * These tests establish performance metrics for future optimization reference\n */\n\nimport {\n  describe,\n  test,\n  expect,\n  beforeEach,\n  afterEach,\n  jest,\n} from '@jest/globals';\nimport { DrupalMcpServer } from '@/mcp/server.js';\nimport { DrupalClient } from '@/services/drupal-client.js';\nimport { loadConfig } from '@/config/index.js';\n\n// Mock fetch for consistent performance testing\nconst mockFetch = jest.fn();\nglobal.fetch = mockFetch as any;\n\ninterface PerformanceMetrics {\n  executionTime: number;\n  memoryUsage: {\n    heapUsed: number;\n    heapTotal: number;\n    external: number;\n  };\n  cpuTime?: number;\n}\n\ninterface BenchmarkResult {\n  operation: string;\n  iterations: number;\n  avgTime: number;\n  minTime: number;\n  maxTime: number;\n  memoryDelta: number;\n  throughput: number; // operations per second\n}\n\ndescribe('Performance Baseline Measurements', () => {\n  let config: any;\n  let mcpServer: DrupalMcpServer;\n  let drupalClient: DrupalClient;\n\n  beforeEach(async () => {\n    config = {\n      drupal: {\n        baseUrl: 'http://localhost/drupal',\n        endpoint: '/jsonrpc',\n        timeout: 10000,\n        retries: 3,\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n        },\n      },\n      oauth: {\n        clientId: 'test-client-id',\n        authorizationEndpoint: 'http://localhost/drupal/oauth/authorize',\n        tokenEndpoint: 'http://localhost/drupal/oauth/token',\n        redirectUri: 'http://127.0.0.1:3000/callback',\n        scopes: ['tutorial:read', 'user:profile'],\n      },\n      auth: {\n        enabled: false, // Disable auth for performance tests\n        requiredScopes: ['tutorial:read'],\n        skipAuth: true,\n      },\n      mcp: {\n        name: 'test-drupal-bridge-mcp',\n        version: '1.0.0-test',\n        protocolVersion: '2024-11-05',\n        capabilities: {\n          resources: { subscribe: true, listChanged: true },\n          tools: { listChanged: true },\n          prompts: { listChanged: true },\n        },\n      },\n      server: {\n        port: 3000,\n        host: '0.0.0.0',\n      },\n      logging: {\n        level: 'error' as const,\n      },\n      environment: 'test' as const,\n    };\n\n    mcpServer = new DrupalMcpServer(config);\n    drupalClient = new DrupalClient(config.drupal);\n\n    jest.clearAllMocks();\n\n    // Force garbage collection if available for more accurate memory measurements\n    if (global.gc) {\n      global.gc();\n    }\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  /**\n   * Measure performance of a function\n   */\n  async function measurePerformance<T>(\n    operation: () => Promise<T>,\n    warmupRuns = 3,\n    measureRuns = 10\n  ): Promise<{ result: T; metrics: PerformanceMetrics }> {\n    // Warmup runs to stabilize JIT compilation\n    for (let i = 0; i < warmupRuns; i++) {\n      await operation();\n    }\n\n    // Force garbage collection before measurement\n    if (global.gc) {\n      global.gc();\n    }\n\n    const initialMemory = process.memoryUsage();\n    const startTime = process.hrtime.bigint();\n\n    let result: T;\n    for (let i = 0; i < measureRuns; i++) {\n      result = await operation();\n    }\n\n    const endTime = process.hrtime.bigint();\n    const finalMemory = process.memoryUsage();\n\n    const executionTime = Number(endTime - startTime) / 1_000_000; // Convert to milliseconds\n    const memoryUsage = {\n      heapUsed: finalMemory.heapUsed - initialMemory.heapUsed,\n      heapTotal: finalMemory.heapTotal - initialMemory.heapTotal,\n      external: finalMemory.external - initialMemory.external,\n    };\n\n    return {\n      result: result!,\n      metrics: {\n        executionTime: executionTime / measureRuns, // Average execution time\n        memoryUsage,\n      },\n    };\n  }\n\n  /**\n   * Run benchmark with multiple iterations and collect statistics\n   */\n  async function runBenchmark<T>(\n    name: string,\n    operation: () => Promise<T>,\n    iterations = 100\n  ): Promise<BenchmarkResult> {\n    const times: number[] = [];\n    const initialMemory = process.memoryUsage().heapUsed;\n\n    console.log(`Starting benchmark: ${name} (${iterations} iterations)`);\n\n    const startTime = Date.now();\n\n    for (let i = 0; i < iterations; i++) {\n      const iterationStart = process.hrtime.bigint();\n      await operation();\n      const iterationEnd = process.hrtime.bigint();\n\n      times.push(Number(iterationEnd - iterationStart) / 1_000_000);\n    }\n\n    const totalTime = Date.now() - startTime;\n    const finalMemory = process.memoryUsage().heapUsed;\n\n    const avgTime = times.reduce((a, b) => a + b, 0) / times.length;\n    const minTime = Math.min(...times);\n    const maxTime = Math.max(...times);\n    const memoryDelta = finalMemory - initialMemory;\n    const throughput = (iterations * 1000) / totalTime;\n\n    const result: BenchmarkResult = {\n      operation: name,\n      iterations,\n      avgTime,\n      minTime,\n      maxTime,\n      memoryDelta,\n      throughput,\n    };\n\n    console.log(`Benchmark ${name} completed:`);\n    console.log(`  Average time: ${avgTime.toFixed(2)}ms`);\n    console.log(`  Min time: ${minTime.toFixed(2)}ms`);\n    console.log(`  Max time: ${maxTime.toFixed(2)}ms`);\n    console.log(`  Memory delta: ${Math.round(memoryDelta / 1024)}KB`);\n    console.log(`  Throughput: ${throughput.toFixed(2)} ops/sec`);\n    console.log('');\n\n    return result;\n  }\n\n  describe('Search Operation Performance', () => {\n    test('should benchmark basic search tutorial operation', async () => {\n      const benchmark = await runBenchmark(\n        'Basic Search Tutorial',\n        async () => {\n          return await (mcpServer as any).executeSearchTutorials({\n            keywords: 'forms',\n          });\n        },\n        50\n      );\n\n      // Performance expectations (baseline measurements)\n      expect(benchmark.avgTime).toBeLessThan(10); // Should average less than 10ms in test mode\n      expect(benchmark.throughput).toBeGreaterThan(50); // Should handle at least 50 ops/sec\n      expect(benchmark.memoryDelta).toBeLessThan(10 * 1024 * 1024); // Less than 10MB memory increase\n\n      // Store baseline metrics for future comparisons\n      expect(benchmark).toMatchObject({\n        operation: 'Basic Search Tutorial',\n        iterations: 50,\n        avgTime: expect.any(Number),\n        minTime: expect.any(Number),\n        maxTime: expect.any(Number),\n        memoryDelta: expect.any(Number),\n        throughput: expect.any(Number),\n      });\n    });\n\n    test('should benchmark search with filters', async () => {\n      const benchmark = await runBenchmark(\n        'Filtered Search Tutorial',\n        async () => {\n          return await (mcpServer as any).executeSearchTutorials({\n            keywords: 'content management',\n            drupal_version: ['10'],\n            category: ['tutorial', 'cms'],\n          });\n        },\n        30\n      );\n\n      // Filtered searches might be slightly slower due to additional processing\n      expect(benchmark.avgTime).toBeLessThan(15);\n      expect(benchmark.throughput).toBeGreaterThan(30);\n    });\n\n    test('should benchmark parameter validation performance', async () => {\n      const { validateSearchContentParams } = await import(\n        '@/utils/validation.js'\n      );\n\n      const benchmark = await runBenchmark(\n        'Parameter Validation',\n        async () => {\n          return validateSearchContentParams({\n            keywords: 'test validation performance',\n            drupal_version: ['11'],\n            category: ['performance', 'testing', 'validation'],\n          });\n        },\n        1000\n      );\n\n      // Validation should be very fast\n      expect(benchmark.avgTime).toBeLessThan(1);\n      expect(benchmark.throughput).toBeGreaterThan(1000);\n    });\n  });\n\n  describe('MCP Tool Integration Performance', () => {\n    test('should benchmark MCP tool execution pipeline', async () => {\n      const benchmark = await runBenchmark(\n        'MCP Tool Execution',\n        async () => {\n          return await (mcpServer as any).executeTool('search_tutorials', {\n            keywords: 'mcp performance test',\n          });\n        },\n        30\n      );\n\n      // MCP tool execution includes additional overhead for formatting\n      expect(benchmark.avgTime).toBeLessThan(20);\n      expect(benchmark.throughput).toBeGreaterThan(25);\n    });\n\n    test('should benchmark error handling overhead', async () => {\n      const benchmark = await runBenchmark(\n        'Error Handling',\n        async () => {\n          try {\n            return await (mcpServer as any).executeTool('search_tutorials', {\n              keywords: 'x', // Will trigger validation error\n            });\n          } catch (error) {\n            return error;\n          }\n        },\n        100\n      );\n\n      // Error handling should add minimal overhead\n      expect(benchmark.avgTime).toBeLessThan(5);\n      expect(benchmark.throughput).toBeGreaterThan(100);\n    });\n  });\n\n  describe('Memory Usage Patterns', () => {\n    test('should measure memory usage for large response handling', async () => {\n      const { result, metrics } = await measurePerformance(async () => {\n        // Simulate processing large tutorial content\n        const searchResult = await (mcpServer as any).executeSearchTutorials({\n          keywords: 'large content test',\n        });\n\n        // Process and format multiple results\n        return Array.from({ length: 100 }, (_, i) => ({\n          ...searchResult.results[0],\n          id: `${i}`,\n          title: `Large Tutorial ${i}`,\n          content: 'x'.repeat(10000), // 10KB of content per result\n        }));\n      });\n\n      console.log('Large Response Memory Usage:');\n      console.log(`  Execution time: ${metrics.executionTime.toFixed(2)}ms`);\n      console.log(\n        `  Heap used delta: ${Math.round(metrics.memoryUsage.heapUsed / 1024)}KB`\n      );\n      console.log(\n        `  External memory delta: ${Math.round(metrics.memoryUsage.external / 1024)}KB`\n      );\n\n      expect(result).toHaveLength(100);\n      expect(metrics.executionTime).toBeLessThan(50); // Should handle large content quickly\n      expect(metrics.memoryUsage.heapUsed).toBeLessThan(50 * 1024 * 1024); // Less than 50MB\n    });\n\n    test('should measure memory usage for concurrent operations', async () => {\n      const concurrentOperations = 10;\n\n      const { result, metrics } = await measurePerformance(async () => {\n        const promises = Array.from({ length: concurrentOperations }, (_, i) =>\n          (mcpServer as any).executeSearchTutorials({\n            keywords: `concurrent test ${i}`,\n          })\n        );\n\n        return await Promise.all(promises);\n      });\n\n      console.log(\n        `Concurrent Operations Memory Usage (${concurrentOperations} operations):`\n      );\n      console.log(`  Execution time: ${metrics.executionTime.toFixed(2)}ms`);\n      console.log(\n        `  Memory delta: ${Math.round(metrics.memoryUsage.heapUsed / 1024)}KB`\n      );\n\n      expect(result).toHaveLength(concurrentOperations);\n      expect(metrics.executionTime).toBeLessThan(100);\n    });\n  });\n\n  describe('Error Scenario Performance', () => {\n    test('should benchmark network timeout handling', async () => {\n      // Mock network timeout\n      mockFetch.mockImplementation(\n        () =>\n          new Promise((_, reject) => {\n            setTimeout(() => reject(new Error('timeout')), 10);\n          })\n      );\n\n      const benchmark = await runBenchmark(\n        'Network Timeout Handling',\n        async () => {\n          try {\n            // Create client with short timeout for testing\n            const testClient = new DrupalClient({\n              ...config.drupal,\n              timeout: 50, // 50ms timeout\n              retries: 1, // Only 1 retry for faster testing\n            });\n\n            return await testClient.testConnection();\n          } catch (error) {\n            return { error: true };\n          }\n        },\n        10 // Fewer iterations due to timeouts\n      );\n\n      // Timeout handling should be reasonably fast\n      expect(benchmark.avgTime).toBeLessThan(100); // Should timeout quickly\n    });\n\n    test('should benchmark JSON-RPC error response processing', async () => {\n      // Mock JSON-RPC error response\n      mockFetch.mockResolvedValue({\n        status: 200,\n        headers: new Map([['content-type', 'application/json']]),\n        json: () =>\n          Promise.resolve({\n            jsonrpc: '2.0',\n            error: {\n              code: -32602,\n              message: 'Invalid parameters for testing',\n              data: { field: 'keywords', type: 'VALIDATION_ERROR' },\n            },\n            id: 'test-error',\n          }),\n      });\n\n      const benchmark = await runBenchmark(\n        'JSON-RPC Error Processing',\n        async () => {\n          try {\n            return await drupalClient.searchTutorials({\n              keywords: 'error test',\n            });\n          } catch (error) {\n            return { error: true };\n          }\n        },\n        50\n      );\n\n      // Error processing should be fast\n      expect(benchmark.avgTime).toBeLessThan(20);\n      expect(benchmark.throughput).toBeGreaterThan(25);\n    });\n  });\n\n  describe('Performance Regression Detection', () => {\n    test('should establish baseline metrics for future comparison', () => {\n      // This test documents the expected performance characteristics\n      // Future test runs can compare against these baselines\n\n      const performanceBaselines = {\n        basicSearch: {\n          avgTime: 10, // ms\n          throughput: 50, // ops/sec\n          memoryPerOp: 1024, // bytes\n        },\n        filteredSearch: {\n          avgTime: 15, // ms\n          throughput: 30, // ops/sec\n        },\n        validation: {\n          avgTime: 1, // ms\n          throughput: 1000, // ops/sec\n        },\n        mcpToolExecution: {\n          avgTime: 20, // ms\n          throughput: 25, // ops/sec\n        },\n        errorHandling: {\n          avgTime: 5, // ms\n          throughput: 100, // ops/sec\n        },\n      };\n\n      console.log('Performance Baselines Established:');\n      console.log(JSON.stringify(performanceBaselines, null, 2));\n\n      // Store baselines in test metadata\n      expect(performanceBaselines).toMatchSnapshot({\n        basicSearch: {\n          avgTime: expect.any(Number),\n          throughput: expect.any(Number),\n          memoryPerOp: expect.any(Number),\n        },\n        filteredSearch: {\n          avgTime: expect.any(Number),\n          throughput: expect.any(Number),\n        },\n        validation: {\n          avgTime: expect.any(Number),\n          throughput: expect.any(Number),\n        },\n        mcpToolExecution: {\n          avgTime: expect.any(Number),\n          throughput: expect.any(Number),\n        },\n        errorHandling: {\n          avgTime: expect.any(Number),\n          throughput: expect.any(Number),\n        },\n      });\n    });\n  });\n});\n"],"version":3}