# =============================================================================
# Drupalize.me MCP Server Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values for local development
# Railway will override these with platform-specific environment variables

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node.js Environment (development, staging, production)
NODE_ENV=development

# Application port (Railway will override this with PORT)
PORT=3000

# Logging level (error, warn, info, debug)
LOG_LEVEL=debug

# =============================================================================
# MCP PROTOCOL CONFIGURATION
# =============================================================================

# MCP transport method (stdio, sse)
MCP_TRANSPORT=sse

# Request timeout in milliseconds
REQUEST_TIMEOUT=30000

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# Railway will automatically provide DATABASE_URL for PostgreSQL addon
# These are for local development override

# Full PostgreSQL connection URL (Railway managed)
# FORMAT: postgresql://username:password@hostname:port/database_name
DATABASE_URL=postgresql://user:password@localhost:5432/drupalizeme_mcp

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_CONNECTION_TIMEOUT=10000
DATABASE_IDLE_TIMEOUT=30000

# SSL configuration for production (Railway handles this automatically)
DATABASE_SSL=true
DATABASE_SSL_MODE=prefer

# =============================================================================
# DRUPAL INTEGRATION CONFIGURATION
# =============================================================================

# Drupal site base URL (without trailing slash)
DRUPAL_BASE_URL=https://drupalize.me

# JSON-RPC endpoint path
DRUPAL_JSONRPC_ENDPOINT=/jsonrpc

# =============================================================================
# OAUTH 2.0 AUTHENTICATION CONFIGURATION
# =============================================================================

# OAuth client credentials (obtained from Drupal Simple OAuth module)
OAUTH_CLIENT_ID=your_oauth_client_id_here
OAUTH_CLIENT_SECRET=your_oauth_client_secret_here

# OAuth endpoints (full URLs or relative to DRUPAL_BASE_URL)
OAUTH_AUTHORIZATION_URL=https://drupalize.me/oauth/authorize
OAUTH_TOKEN_URL=https://drupalize.me/oauth/token

# OAuth scopes (space-separated)
OAUTH_SCOPES="content:read user:read"

# OAuth redirect URI for authorization flow
OAUTH_REDIRECT_URI=http://localhost:3000/oauth/callback

# Token refresh settings
OAUTH_TOKEN_REFRESH_BUFFER=300

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# HTTPS enforcement (automatically enabled in production)
HTTPS_ONLY=false

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# CORS settings (comma-separated origins for production)
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000

# Security headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
XSS_PROTECTION_ENABLED=true
NO_SNIFF_ENABLED=true
REFERRER_POLICY=strict-origin-when-cross-origin

# Session security (must be 32+ chars for production)
SESSION_SECRET=dev-secret-key-at-least-32-chars-long

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

# Enable health check endpoint
HEALTH_CHECK_ENABLED=true

# Health check endpoint path
HEALTH_CHECK_PATH=/health

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Enable detailed request logging
REQUEST_LOGGING_ENABLED=true

# Log format (combined, common, dev, short, tiny)
LOG_FORMAT=dev

# Enable performance metrics
METRICS_ENABLED=false

# =============================================================================
# RAILWAY-SPECIFIC CONFIGURATION
# =============================================================================
# These variables are automatically set by Railway and should not be modified

# RAILWAY_ENVIRONMENT - Set by Railway (production, staging, preview)
# RAILWAY_PROJECT_ID - Set by Railway
# RAILWAY_SERVICE_ID - Set by Railway
# RAILWAY_DEPLOYMENT_ID - Set by Railway
# RAILWAY_REPLICA_ID - Set by Railway

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Mock OAuth for local development (set to 'true' to bypass OAuth)
MOCK_OAUTH=false

# Debug mode for additional logging
DEBUG_MODE=false

# Skip SSL verification for self-signed certificates (development only)
NODE_TLS_REJECT_UNAUTHORIZED=1